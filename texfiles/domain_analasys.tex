\chapter{Domain analasys}
\label{chap:Domain analasys}
\todo[inline]{introduce chapter}

\section{Requirements}
\label{sec:Requirements}
In order for me to know what is expected of the system I have spoken with Kristian, and together we have come up with some requirements for the system. This includes what users should be in the system, as well as what those users can do. We also talked about some of the views that are important to have for the CRM to be usable, and what annoys him in the existing CRM's, so that this one will be more to IT-minds needs.

\subsection{Users}
\label{sub:Users}

One of the basic requirements are the users that the system will support. Ideally the following three user types should be supported, each with the rights of the previous, as well as some rights of their own.

\begin{itemize}
  \item Super
  \item Administrator
  \item Standard user
\end{itemize}

The administrator does not have any special rights compared to the standard user initially, but they my have predesigned overviews, because their role in the system is to gain an overview of the all the users in a department or user group. They can of course also do the same as a standard user, such as create people and companies. In the future they may gain privileges that the standard user is not supposed to have, but for now that will not be the case.

One could argue that it is pointless to have that user at this point since it cannot do anything special, but the primary argument is that IT-minds, and a lot of others have this structure in delegation of responsibility, and if in the future we decide that there is some information that the administrators should have access to but the normal users should not, the setup is already in place, and the super administrator will not have to reassign all the users who are supposed to be administrators.

This leads to the things the super administrator can do. This include invitation of users, and assignment of groups and roles. They should also be able to define what groups are available, as well as departments and activity categories. It will also be the super admin who defines states and their percentage value.

A final thing that users should have is production goals, this means that the super administrator should be able to assign a goal for the user to sell for every month. But because this value may increase it should be in a way so that the assignment is associated with a month and year, and it will run until the next assigned value, which then takes over from that month.

This is a requirement because it gives the users something to aim fore, and allows for a visualization of earnings versus goals, which will be discussed in section~\ref{sub:Visualization}.

\subsection{Resources}
\label{sub:Resources}

A theme with a lot of the requirements was the desire to be able to customize, instead of having the system enforce things on the users. The things that should de customizable is categories, departments, stages and the like. Generally things that tag something, and that may carry a value with it, such as stage, which is supposed to have a percentage of certainty for an opportunity. Letting the super user make the stages them selves also allows them to set what the stage actually means, allowing a system that suites the individual company's way of working better.

The customization should only be something that the super administrator can create, as to avoid too many things that essentially mean the same to show up. In the case of an opportunity the tag that a stage shows may be fitting while the value is not, therefore it is also desired that the creator of the opportunity can overrule the suggested value that the stage carries to fit better with each individual opportunity.

The system should keep track of opportunities which are possible deals, and deals that are won. An opportunity needs to contain some information such as who is responsible for it, and who the deal is with, as well as how much it will earn. A full list of what an opportunity should contain can be seen in appendix~\ref{app:Oppotunity}.

The primary reason for IT-minds to want a new CRM is that most other CRM's frontload the earning from an opportunity, resulting in a task that that will earn a lot of money, but also takes up a lot of resources looking like it has no impact on any of the months after the first. This is not how it works in reality, as the company who hires ex. IT-minds to work for a couple of months pay a little bit every month instead of everything all at once. The solution to this is mostly in regards to data visualization, where we need to keep track of the span of an opportunity, and what it will earn over that period, this should then be divided out over the span of the opportunity, also meaning that the earnings of a user is based on the same, since it needs to be possible to set goals for the user on a per month basis.

Since an opportunity is a bigger thing, and there will be a lot of work related to a single one, we also need a way to keep track of smaller tasks, such as making a call, or going to a meeting. This is where an activity comes in to the picture. An activity should be able to be several things defined by the super admin, but the primary thing that it does is define a task for a user to do. The task could be to send an email, or make a call, or go to a conference. Because these things don't take the same amount of time a category for them can have a value, so it can be visualized what the users are using their time on. This is useful as right now IT-minds ports the number of activity for all the users to a spread sheet, and graphs from there, but if the system could do that for them some inconvenience would be saved.

\subsection{Visualization}
\label{sub:Visualization}
For the visualization the primary goal if that a user should be able to see the different types of data illustrated in graphs. This means that a thing such as the data of what a user have earned in a period, versus their goal in that given period. Ideally the graph should be made in such a way that some view based settings can be given, and an administrator would be able to get an overview over the sum of all the goals versus the sum of all the sales that the users have done. This should be separable\todo{Does not sound right??} both into departments, and on a per user basis.

The view settings that a user chooses should be saved to the database, so that they do not have to reset it every tine they visit that same page, as in the long run that would take up a lot of their time.

A feature that has been requested is that instead of having a sale of ex. 1.500.000 kr. in one month be set as that user having sold for that amount in that month, but instead have the value spaced out over the period that the project will run, as this will illustrate in a more clear way how the sales personal is able to generate work, and allocate the resources of the company.

\section{Use cases}
\label{sec:Use cases}
From the requirements of section~\ref{sec:Requirements} I have created a use case diagram, to help identify the use cases that is in the project, as can be seen in Figure~\ref{fig:usecase}. To help create the diagram I used an Actor - Goal list, that can be seen in Appendix~\ref{app:actor-goal}.

\begin{figure}[h]
  \centering
  \missingfigure{Usecase diagram}
  \caption{Usecase diagram of the CRM system}
  \label{fig:usecase}
\end{figure}

\subsection{Use case 1: Create Operation}
\textbf{Scope}: CRM \\
\textbf{Level}: User-goal \\
\textbf{Primary actor}: User \\
\textbf{Stakeholders \& interests}:
\begin{itemize}
  \item User: Wants to be able to track the likelihood of an opportunity, and assign tasks to is, as well as keep track of opportunities in companies
\end{itemize}
\textbf{Preconditions}: User is logged in \\
\textbf{Postconditions}: Opportunity is saved. User is associated. Company associated. Person associated. Stage associated. User groups coppied\\
\textbf{Main Success Scenario}:
\begin{enumerate}
  \item User fills out the Name, Description, Price, Start and End dates, Category, Hourly price, and expected close date
  \item User picks a company from a list
  \item User picks a department for the opportunity
  \item User Chooses a stage
  \item User adjusts the percentile for success
  \item User saves the data
\end{enumerate}
\textbf{Extentions}:
\begin{enumerate}
  \item
\end{enumerate}
\textbf{Frequency of Occurrence}: Multiple times a day



\chapter{Domain Model}
\label{chap:Domain Model}


\section{Chapter summary}
